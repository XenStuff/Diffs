#!/usr/bin/bash

#
# Before you start, make sure you squash all split OEM commits into
# one single commit. This will break down the single huge commit
# into multiple smaller commits, helping to cleanup OEM codes easier.
#

# Make sure you rebase and remove the BEGIN OEM IMPORTS commit (it will
# be an empty commit)
git reset HEAD^ . > /dev/null 2>&1
git commit --amend --allow-empty -sm "BEGIN OEM IMPORTS" > /dev/null 2>&1

# Apply OEM modifications
echo "Applying OEM modifications"
CHANGEDPATHS=(
    "arch/arm"
    "arch/arm64/boot"
    "arch/arm64/configs"
    "arch/arm64/"
    "block/"
    "drivers/accessibility"
    "drivers/acpi"
    "drivers/amba"
    "drivers/android"
    "drivers/ata"
    "drivers/atm"
    "drivers/auxdisplay"
    "drivers/base"
    "drivers/bcma"
    "drivers/block"
    "drivers/bluetooth"
    "drivers/bus"
    "drivers/cdrom"
    "drivers/char"
    "drivers/clk"
    "drivers/clocksource"
    "drivers/connector"
    "drivers/counter"
    "drivers/cpufreq"
    "drivers/cpuidle"
    "drivers/crypto"
    "drivers/dax"
    "drivers/dca"
    "drivers/devfreq"
    "drivers/dio"
    "drivers/dma"
    "drivers/dma-buf"
    "drivers/edac"
    "drivers/eisa"
    "drivers/esoc"
    "drivers/extcon"
    "drivers/firewire"
    "drivers/firmware"
    "drivers/fpga"
    "drivers/fsi"
    "drivers/gnss"
    "drivers/gpio"
    "drivers/gpu"
    "drivers/greybus"
    "drivers/hid"
    "drivers/hsi"
    "drivers/hv"
    "drivers/hwmon"
    "drivers/hwspinlock"
    "drivers/hwtracing"
    "drivers/i2c"
    "drivers/i3c"
    "drivers/ide"
    "drivers/idle"
    "drivers/iio"
    "drivers/infiniband"
    "drivers/input"
    "drivers/interconnect"
    "drivers/iommu"
    "drivers/ipack"
    "drivers/irqchip"
    "drivers/isdn"
    "drivers/Kconfig"
    "drivers/leds"
    "drivers/lightnvm"
    "drivers/macintosh"
    "drivers/mailbox"
    "drivers/Makefile"
    "drivers/mcb"
    "drivers/md"
    "drivers/media"
    "drivers/memory"
    "drivers/memstick"
    "drivers/message"
    "drivers/mfd"
    "drivers/misc"
    "drivers/mmc"
    "drivers/mtd"
    "drivers/mux"
    "drivers/net"
    "drivers/nfc"
    "drivers/ntb"
    "drivers/nubus"
    "drivers/nvdimm"
    "drivers/nvme"
    "drivers/nvmem"
    "drivers/of"
    "drivers/opp"
    "drivers/oprofile"
    "drivers/parisc"
    "drivers/parport"
    "drivers/pci"
    "drivers/pcmcia"
    "drivers/perf"
    "drivers/phy"
    "drivers/pinctrl"
    "drivers/platform"
    "drivers/pnp "
    "drivers/power"
    "drivers/powercap"
    "drivers/pps"
    "drivers/ps3"
    "drivers/ptp"
    "drivers/pwm"
    "drivers/rapidio"
    "drivers/ras"
    "drivers/regulator"
    "drivers/remoteproc"
    "drivers/reset"
    "drivers/rpmsg"
    "drivers/rtc"
    "drivers/s390"
    "drivers/sbus"
    "drivers/scsi"
    "drivers/sfi"
    "drivers/sh"
    "drivers/siox"
    "drivers/slimbus"
    "drivers/soc"
    "drivers/soundwire"
    "drivers/spi"
    "drivers/spmi"
    "drivers/ssb"
    "drivers/staging"
    "drivers/target"
    "drivers/tc"
    "drivers/tee"
    "drivers/thermal"
    "drivers/thunderbolt"
    "drivers/tty"
    "drivers/uio"
    "drivers/usb"
    "drivers/vfio"
    "drivers/vhost"
    "drivers/video"
    "drivers/virt"
    "drivers/virtio"
    "drivers/visorbus"
    "drivers/vlynq"
    "drivers/vme"
    "drivers/w1"
    "drivers/watchdog"
    "drivers/xen"
    "drivers/zorro"
    "drivers/"
    "firmware/"
    "fs/"
    "include/"
    "init/"
    "kernel/"
    "lib/"
    "mm/"
    "net/"
    "scripts/"
    "security/"
    "sound/"
    "techpack/audio/"
    "techpack/camera/"
    "techpack/display/"
    "techpack/stub/"
    "techpack/video/"
    "techpack/"
    "tools/"
)
for ELEMENT in ${CHANGEDPATHS[@]}; do
    [[ -d $ELEMENT ]] && git add $ELEMENT -f > /dev/null 2>&1
    git commit -sm "$ELEMENT: import OEM changes" > /dev/null 2>&1
done
